# Particle World

基于物理引擎的粉末沙盒模拟游戏，纯浏览器运行。

## 在线体验

```bash
npm install
npm run dev
```

浏览器打开 `http://localhost:5173`

## 材质系统（91 种）

| 分类 | 材质 | 行为 |
|------|------|------|
| 粉末 | 沙子、种子、雪、泥土、火药、盐、烟花、炼金石、水泥、木炭、白磷、干冰、硫磺、铁锈、焦油砂、苔原、钠 | 受重力下落，可堆积 |
| 液体 | 水、油、酸液、熔岩、盐水、液蜡、湿水泥、蜂蜜、沼泽、水银、泥浆、沥青、液氮、树脂、荧光液、熔盐、凝胶、血液、黏液 | 流动、密度分层、化学反应 |
| 气体 | 火、烟、蒸汽、雷电、毒气、氢气、火花、龙卷风、等离子体、泡泡、云、沙尘暴 | 上升飘散，有生命周期 |
| 固体 | 石头、木头、金属、植物、冰、玻璃、黏土、蜡、橡皮泥、金、钻石、橡胶、混凝土、磁铁、电线、水晶、黑曜石、琥珀、珊瑚、萤石、霜、岩浆岩、铜、锡、齿轮、陶瓷 | 不移动，作为障碍物或特殊功能 |
| 生物 | 蚂蚁、病毒、苔藓、萤火虫、藤蔓、菌丝、白蚁 | AI 行为的生物粒子 |
| 工具 | 空气（橡皮擦）、克隆体、虚空、喷泉、传送门、激光、陨石 | 特殊功能材质 |
| 特殊 | 泡沫、蛛丝 | 轻质/粘性特殊材质 |

## 化学反应

- 火 + 可燃物（木头/油/植物） → 蔓延燃烧
- 火 + 水 → 蒸汽
- 蒸汽冷却 → 凝结为水（30%）或消散
- 酸液 + 大部分材质 → 溶解（金属免疫）
- 熔岩 + 水 → 黑曜石 + 蒸汽
- 熔岩 + 可燃物 → 点燃
- 种子 + 水 + 固体地面 → 植物生长
- 雪/冰 + 火/熔岩/蒸汽 → 融化为水
- 冰 + 相邻水 → 扩散冻结
- 雷电 + 沙子 → 玻璃
- 雷电 + 可燃物 → 点燃
- 雷电 + 水 → 蒸汽
- 毒气 + 植物 → 烟（杀死植物）
- 毒气 + 水 → 被吸收净化
- 氢气 + 火/熔岩/雷电 → 爆炸（链式引爆）
- 酸液 + 玻璃 → 腐蚀
- 盐 + 水 → 溶解为盐水
- 盐水 + 高温 → 蒸汽 + 析出盐
- 蜡 + 高温/火 → 融化为液蜡
- 液蜡 + 冷却 → 凝固为蜡
- 液蜡/蜡 + 火 → 燃烧
- 烟花 + 火/熔岩 → 点燃上升后爆炸产生火花
- 炼金石 + 金属 → 金
- 炼金石 + 石头 → 钻石
- 炼金石 + 沙子 → 玻璃
- 炼金石 + 泥土 → 种子
- 水泥粉 + 水/盐水 → 湿水泥 → 固化为混凝土
- 橡胶 + 高温 → 燃烧（烟+火）
- 橡胶表面 → 粒子反弹（弹射2~4格）
- 克隆体 + 任意材质 → 记忆并持续复制该材质
- 虚空 → 吞噬周围一切材质
- 喷泉 → 持续在上方生成水
- 蚂蚁 → AI 行走、挖掘沙土、搬运材质，遇水/火死亡
- 传送门 → 成对放置，粒子从一端进入另一端出现
- 磁铁 → 吸引范围内的金属和金粒子
- 病毒 + 有机物（木头/植物/泥土等） → 感染转化，火/酸可杀
- 电线 + 雷电/火花 → 通电传导，末端释放火花
- 蜂蜜 → 高粘度液体，流速受温度影响，超高温蒸发
- 木头 + 火 → 40%概率产生木炭（而非直接消失）
- 木炭 + 火/高温(>150°) → 再次燃烧
- 激光 → 向下发射光束，穿透玻璃，点燃可燃物，融化冰雪
- 苔藓 + 水 + 石头/泥土 → 缓慢蔓延生长，高温枯死
- 龙卷风 → 吸引周围粒子向上抛射，有限寿命
- 泡沫 + 水 → 起泡扩散，有限寿命破裂消失，火/酸溶解
- 水晶 + 盐水/盐 → 缓慢结晶生长，低温加速，高温融化，雷电击碎
- 沼泽 + 种子 → 催生植物，吞噬沙土，高温蒸发为泥土
- 等离子体 → 超高温电离气体，点燃/融化周围材质，沙子烧结为玻璃
- 萤火虫 → 发光飞行生物，被植物吸引，遇水/火死亡
- 水银 → 极重液态金属，有毒杀死有机物，导电产生火花，高温蒸发为毒气
- 藤蔓 + 固体表面 + 水 → 沿墙壁攀爬生长，可燃，酸液溶解
- 陨石 → 高速坠落炽热岩石，穿透软材质，撞击坚硬固体爆炸产生熔岩
- 蛛丝 → 粘性网状结构，捕获经过粒子，极易燃，水/酸溶解
- 黑曜石 → 熔岩急冷形成，极坚硬，需 >800° 才能重新融化
- 琥珀 → 远古树脂化石，封存接触到的小粒子，高温融化为蜂蜜，可燃
- 白磷 → 暴露空气自动升温自燃，产生毒气，水可抑制
- 泥浆 → 水+泥土混合态，粘稠流动，干燥/高温变为泥土，冷冻固化
- 珊瑚 → 水中缓慢生长的生物结构，多彩外观，高温白化变石头，酸液腐蚀
- 干冰 → 固态CO2，持续升华产生蒸汽，极低温冷冻周围液体，接触水剧烈升华
- 硫磺 → 黄色易燃粉末，遇火/熔岩燃烧产生毒气，高温自燃，酸液可溶解
- 沥青 → 黑色高粘度液体，极缓慢流动，可燃产生浓烟，高温软化加速流动
- 液氮 → 极低温液体，瞬间冷冻接触的一切，快速蒸发产生冷雾，遇火剧烈蒸发
- 萤石 → 受热发荧光的矿石，温度越高越亮，极高温碎裂，雷电触发强光
- 菌丝 → 在泥土/木头上蔓延的真菌网络，潮湿加速生长，分解木头，可燃
- 树脂 → 粘稠天然液体，遇火燃烧产生浓烟，高温热固化为琥珀，粘附木质表面
- 铁锈 + 金属 + 水/酸 → 腐蚀扩散，将金属转化为铁锈，极高温还原为金属
- 泡泡 → 轻盈上浮气泡，彩虹薄膜效果，碰固体/边界破裂，有限寿命，风力漂移
- 焦油砂 + 火 → 释放油并燃烧，残留沙子；遇水缓慢分离出油
- 霜 → 附着表面的薄冰层，低温扩散生长，>5°融化为水，冻结相邻水为冰，蒸汽凝结
- 云 → 飘浮水汽团，随风横移，遇冷凝结为雪，积累降雨，吸收蒸汽聚合
- 熔岩 + 冰/雪 → 岩浆岩 + 蒸汽
- 岩浆岩 → 熔岩冷却形成的深色岩石，极高温重新融化，耐酸腐蚀
- 苔原 → 永久冻土层，高温融化为泥浆，冻结相邻水，表面可生长苔藓
- 钠 + 水 → 剧烈爆炸产生火焰和氢气，遇酸溶解产生氢气，高温自燃
- 荧光液 → 发光液体，接触水扩散，遇酸闪光消失，亮绿色脉动效果
- 白蚁 → 啃食木头/植物/藤蔓的生物，吃饱后繁殖，遇火/水死亡
- 凝胶 → 半固体弹性材质，吸水膨胀，低温冻结，高温蒸发，酸液溶解
- 盐 + 高温(>300°) → 熔盐；熔盐冷却 → 结晶为盐
- 熔盐 + 水 → 剧烈反应产生蒸汽，腐蚀金属
- 沙尘暴 → 携带沙粒的狂风，卷起沙子/泥土，遇水变泥浆，自然沉降为沙子
- 铜 → 导电金属，快速导热，遇水氧化生锈，遇酸腐蚀，传导雷电
- 锡 → 低熔点金属（>230°融化），中等导热，遇酸腐蚀，可导电
- 血液 → 有机液体，比水粘稠，高温凝固，低温冻结，促进种子发芽，病毒快速传播
- 齿轮 → 机械固体，推动上方粉末（传送带效果），通电增强推力，高温融化
- 黏液 → 弹性半液体，弹起落上的粒子，困住小生物，遇火产生毒气，遇水溶解
- 陶瓷 → 黏土高温烧制，极耐高温（>1500°），隔热，耐酸，雷电/等离子体击碎

## 操作

- 鼠标左键拖拽绘制粒子
- 左侧面板选择材质（分类显示）
- 滑块调节笔刷大小（1~10）
- 鼠标滚轮快速调整笔刷大小
- 笔刷预览：悬停时显示圆形范围
- Space 快捷键暂停/继续
- 模拟速度滑块（1x~5x）
- 保存/加载按钮（localStorage 存档）
- 清空按钮重置世界
- 右下角显示 FPS

## 技术架构

- TypeScript + Vite，零运行时依赖
- 200x150 网格，4x 像素缩放，Canvas 2D 渲染
- TypedArray 存储（Uint8Array 材质 ID + Uint32Array ABGR 颜色）
- 双缓冲活跃标记系统，静止粒子跳过更新
- 材质注册表模式，新材质只需实现 `MaterialDef` 接口

## 版本历史

- v8.2 - 陶瓷材质：黏土高温烧制，极耐高温隔热，耐酸，雷电击碎
- v8.1 - 黏液材质：弹性半液体，弹起粒子，困住小生物，遇火产生毒气
- v8.0 - 齿轮材质：机械固体，传送带推动粉末，通电增强，高温融化
- v7.9 - 血液材质：有机液体，高温凝固，低温冻结，促进种子发芽
- v7.8 - 锡材质：低熔点金属，中等导热导电，遇酸腐蚀
- v7.7 - 铜材质：导电金属，快速导热，遇水氧化，传导雷电
- v7.6 - 沙尘暴材质：携带沙粒的狂风，卷起沙土，遇水变泥浆
- v7.5 - 熔盐材质：高温液态盐，盐加热融化，冷却结晶，腐蚀金属
- v7.4 - 凝胶材质：半固体弹性材质，吸水膨胀，低温冻结，高温蒸发
- v7.3 - 白蚁材质：啃食木头/植物的生物，吃饱繁殖，遇火/水死亡
- v7.2 - 荧光液材质：发光液体，接触水扩散，遇酸闪光消失，亮绿色脉动
- v7.1 - 钠材质：活泼金属，遇水剧烈爆炸产生火焰和氢气，高温自燃
- v7.0 - 苔原材质：永久冻土层，高温融化为泥浆，冻结水，表面生长苔藓
- v6.9 - 岩浆岩材质：熔岩冷却形成的深色岩石，极高温重新融化，耐酸
- v6.8 - 云材质：飘浮水汽团，随风横移，遇冷凝结为雪，积累降雨
- v6.7 - 霜材质：附着表面的薄冰层，低温扩散，冻结水为冰，蒸汽凝结
- v6.6 - 焦油砂材质：含油沙子，遇火释放油燃烧残留沙子，遇水分离油
- v6.5 - 泡泡材质：轻盈上浮气泡，彩虹薄膜，碰固体破裂，风力漂移
- v6.4 - 铁锈材质：金属氧化产物，遇水/酸腐蚀扩散金属，高温还原
- v6.3 - 树脂材质：粘稠天然液体，遇火燃烧，高温固化为琥珀，粘附木质
- v6.2 - 菌丝材质：在泥土/木头上蔓延的真菌网络，潮湿加速，分解木头
- v6.1 - 萤石材质：受热发荧光的矿石，颜色随温度变化，雷电触发强光
- v6.0 - 液氮材质：极低温液体，瞬间冷冻一切，快速蒸发产生冷雾
- v5.9 - 沥青材质：黑色高粘度液体，可燃产生浓烟，高温软化流动
- v5.8 - 硫磺材质：黄色易燃粉末，燃烧产生毒气，高温自燃
- v5.7 - 干冰材质：固态CO2，升华产生蒸汽浓雾，极低温冷冻周围液体
- v5.6 - 珊瑚材质：水中缓慢生长的多彩生物结构，高温白化，酸液腐蚀
- v5.5 - 泥浆材质：水+泥土混合态，粘稠流动，干燥固化为泥土
- v5.4 - 白磷材质：暴露空气自动升温自燃，产生毒气，水可抑制
- v5.3 - 琥珀材质：远古树脂化石，封存小粒子，高温融化，透明金黄色
- v5.2 - 黑曜石材质：熔岩急冷形成的火山玻璃，极坚硬，深黑色紫绿光泽
- v5.1 - 蛛丝材质：粘性网状结构，捕获粒子，极易燃，半透明白色
- v5.0 - 陨石材质：高速坠落炽热岩石，撞击爆炸产生熔岩，火焰拖尾
- v4.9 - 藤蔓材质：沿固体表面攀爬生长，接触水加速，可燃
- v4.8 - 水银材质：极重液态金属，有毒导电，银白色金属光泽
- v4.7 - 等离子体材质：超高温电离气体，蓝白闪烁，融化/点燃周围材质
- v4.6 - 沼泽材质：粘稠泥水混合液，吞噬沙土，催生植物
- v4.5 - 水晶材质：从盐水旁缓慢结晶生长，低温加速，雷电击碎
- v4.4 - 萤火虫材质：发光飞行生物，被植物吸引，黄绿色闪烁
- v4.3 - 泡沫材质：轻质浮力材质，水面起泡，有限寿命破裂
- v4.2 - 龙卷风材质：旋转气流，吸引周围粒子向上抛射，有限寿命
- v4.1 - 苔藓材质：在潮湿石头/泥土表面缓慢生长，可燃，高温枯死
- v4.0 - 激光材质：向下发射光束，穿透玻璃，点燃可燃物，融化冰雪
- v3.9 - 木炭材质：木头燃烧产物，粉末状，可再次点燃
- v3.8 - 蜂蜜材质：高粘度液体，流速受温度影响，密度比水高
- v3.7 - 电线材质：传导雷电信号，末端释放火花，可构建简单电路
- v3.6 - 病毒材质：感染有机物并扩散，火/酸/高温可杀灭
- v3.5 - 磁铁材质：吸引范围内金属和金粒子，磁力随距离衰减
- v3.4 - 传送门材质：成对传送，粒子从一端进入另一端出现
- v3.3 - 蚂蚁材质：AI 生物粒子，行走/挖掘/搬运，有限寿命
- v3.2 - 喷泉材质：持续生成水的源头，可搭配虚空做水循环
- v3.1 - 虚空材质：吞噬一切的黑洞，深黑色带紫色光晕
- v3.0 - 克隆体材质：记忆型固体，记住接触材质并持续复制
- v2.9 - 水泥系统：水泥粉+水→湿水泥→固化为混凝土
- v2.8 - 橡胶材质：弹性固体，粒子落上去会反弹
- v2.7 - 炼金石材质：魔法转化（金属→金、石头→钻石、沙子→玻璃）
- v2.6 - 橡皮泥材质：可塑性固体，粘性下落不散开
- v2.5 - 烟花材质：点燃后上升爆炸产生彩色火花
- v2.4 - 蜡烛与蜡：固体蜡高温融化为液蜡，液蜡可燃可凝固
- v2.3 - 盐与盐水：盐溶于水变盐水，盐水蒸发析出盐
- v2.2 - 快捷键升级：数字键选材质、方括号调笔刷、加减号调速度
- v2.1 - 风力系统：可调风向和强度，影响气体和轻粒子
- v2.0 - 温度系统：热传导、蒸发、结冰、融化
- v1.9 - 火药材质：可被火/熔岩/雷电引爆
- v1.8 - 泥土与黏土：泥土遇水变黏土，黏土可烧制
- v1.7 - 存档系统：保存/加载世界状态到 localStorage（RLE 压缩）
- v1.6 - UI 交互升级：笔刷预览、滚轮调整、快捷键、模拟速度控制
- v1.5 - 毒气 + 氢气：有毒气体杀死植物，氢气遇火爆炸
- v1.4 - 雷电 + 玻璃：闪电熔化沙子为玻璃，点燃可燃物
- v1.3 - 冰 + 雪：冻结扩散、融化反应
- v1.2 - 性能优化：活跃粒子追踪，跳过静止粒子
- v1.1 - UI 升级：分类面板、暂停/清空、粒子计数
- v1.0 - 植物生长系统：种子 + 植物
- v0.9 - 金属 + 熔岩材质
- v0.8 - 蒸汽凝结 + 酸液腐蚀
- v0.7 - 火与烟 + 化学反应系统
- v0.6 - 可燃材质：木头 + 油
- v0.5 - 固体材质：石头 + 橡皮擦
- v0.4 - 液体物理：水的流动 + 密度分层
- v0.3 - 交互系统：鼠标绘制 + 材质工具栏
