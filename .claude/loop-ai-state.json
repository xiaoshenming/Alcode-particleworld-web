{
  "notes": "第80轮（迭代5）：纯优化，无新功能。完成最大批量Map→age迁移：\n1. Plant/Philosopher/Firework: Map→age（偏移1编码：age=0未初始化，age=N表示energy=N-1）\n2. Fire/Foam/Bubble/SteamBubble: Map→age（age=0未初始化，set()后立即恢复age）\n3. Plasma/Firefly: Map→age（同上，set()后恢复）\n4. Virus/Wire: Map→age（Wire通电状态存age，set()后恢复）\n5. Cement/WetCement/Tornado: Map→age（swap自动迁移）\n6. Clone: Map→age（固体，age=0未记忆，age=N=记忆的材质ID）\n7. Silicon/ElectroPlasma/NitrogenTrifluoride/Iodine/PhosphorusFire/Jellyfish: Map→age\n8. Ant.ts/Portal.ts: Map存储复杂对象/配对关系，保留Map\n\n关键模式：\n- 每帧调用world.set()的材质：先读age→处理→调set→立即setAge恢复\n- 不调set或调set后不需要age的：正常用age\n- swap()自动迁移age，移动时无需手动迁移\n\nbundle: 1469KB→1466KB（-3KB）",
  "priorities": [
    "1. 继续检查其他材质文件（新材质ID 1201~1225）的代码质量",
    "2. 检查是否有性能热点（Simulation.ts的update循环）",
    "3. 检查Ant.ts和Portal.ts的代码质量（逻辑bug）"
  ],
  "lessons": "1. world.set()会重置age=0，凡是每帧调set刷新颜色的材质，必须在set后立即setAge恢复。2. swap()自动迁移age，无需手动迁移（已验证：Clay/Smoke/Steam/Spark/Virus/Fire/Tornado等）。3. age偏移1编码：age=0未初始化，age=N表示实际值=N-1，避免与未初始化混淆。4. 固体不移动时（Plant/Clone/Wire/Silicon），无需考虑swap迁移。5. Map存复杂对象（Ant的AntState）或非数字类型（Portal的string→string）无法用age替换。",
  "last_updated": "2026-02-27T19:30:00+08:00"
}
